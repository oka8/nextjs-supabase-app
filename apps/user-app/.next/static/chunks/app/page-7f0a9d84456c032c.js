(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1525:(e,s,t)=>{"use strict";t.d(s,{N:()=>r});let r=(0,t(4823).UU)("http://127.0.0.1:54321","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxvY2FsaG9zdCIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQ1MTg1NTUwLCJleHAiOjE5NjA3NjE1NTB9.A9x7b1FhjCTFWVGa8QJ5OJMGq9D3LY1Ib3YGI5X2-OY")},2307:(e,s,t)=>{Promise.resolve().then(t.bind(t,7738))},3039:e=>{function s(e){var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=()=>[],s.resolve=s,s.id=3039,e.exports=s},3213:(e,s,t)=>{"use strict";t.d(s,{A:()=>i,AuthProvider:()=>c});var r=t(4568),a=t(7620),l=t(1525);let n=(0,a.createContext)({user:null,session:null,loading:!0,signOut:async()=>{}}),i=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},c=e=>{let{children:s}=e,[t,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[o,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let{data:{session:s},error:t}=await l.N.auth.getSession();if(t)console.error("Error getting session:",t);else{var e;d(s),i(null!=(e=null==s?void 0:s.user)?e:null)}}catch(e){console.error("Error in getInitialSession:",e)}finally{x(!1)}})();let{data:{subscription:e}}=l.N.auth.onAuthStateChange(async(e,s)=>{var t;d(s),i(null!=(t=null==s?void 0:s.user)?t:null),x(!1)});return()=>e.unsubscribe()},[]);let m=async()=>{try{let{error:e}=await l.N.auth.signOut();e&&console.error("Error signing out:",e)}catch(e){console.error("Error in signOut:",e)}};return(0,r.jsx)(n.Provider,{value:{user:t,session:c,loading:o,signOut:m},children:s})}},7738:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(4568),a=t(1773),l=t(7261),n=t.n(l),i=t(7620),c=t(1525),d=t(3213);function o(){let[e,s]=(0,i.useState)(!1),[t,l]=(0,i.useState)(!0),{user:o,signOut:x,loading:m}=(0,d.A)();(0,i.useEffect)(()=>{(async()=>{try{let{data:e,error:t}=await c.N.auth.getSession();s(!0)}catch(e){console.log("Supabase connection error:",e),s(!1)}finally{l(!1)}})()},[]);let u=async()=>{try{await x()}catch(e){console.error("Sign out error:",e)}};return(0,r.jsx)("div",{className:"font-sans grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8 pb-20 gap-16 sm:p-20",children:(0,r.jsxs)("main",{className:"flex flex-col gap-[32px] row-start-2 items-center sm:items-start",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(a.default,{className:"dark:invert",src:"/next.svg",alt:"Next.js logo",width:180,height:38,priority:!0}),(0,r.jsx)("span",{className:"text-2xl font-bold",children:"+"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"Supabase"})]}),(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 w-full max-w-md",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(m?"bg-yellow-500":o?"bg-green-500":"bg-gray-500")}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:["認証状態: ",m?"確認中...":o?"ログイン済み":"未ログイン"]}),o&&(0,r.jsx)("div",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:o.email})]}),o&&(0,r.jsx)("button",{onClick:u,className:"text-xs bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-300 px-2 py-1 rounded transition-colors",children:"ログアウト"})]})}),(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t?"bg-yellow-500":e?"bg-green-500":"bg-red-500")}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:["Supabase接続: ",t?"確認中...":e?"正常":"切断"]})]}),!t&&!e&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:".env.local の Supabase 設定を確認してください"})]}),(0,r.jsx)("div",{className:"text-center sm:text-left",children:o?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"ようこそ！"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Next.js + Supabase アプリケーションにログインしています"}),(0,r.jsx)("div",{className:"flex gap-3",children:(0,r.jsx)(n(),{href:"/dashboard",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md transition-colors",children:"ダッシュボードを見る"})})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"アカウント機能を試してみましょう"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Supabase Authを使用したログイン・サインアップ機能"}),(0,r.jsx)(n(),{href:"/auth",className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:"ログイン / アカウント作成"})]})}),(0,r.jsxs)("ol",{className:"font-mono list-inside list-decimal text-sm/6 text-center sm:text-left max-w-md",children:[(0,r.jsxs)("li",{className:"mb-2 tracking-[-.01em]",children:["Supabase認証が統合済み"," ",(0,r.jsx)("span",{className:"text-green-600",children:"✓"})]}),(0,r.jsxs)("li",{className:"mb-2 tracking-[-.01em]",children:["ユーザー登録・ログイン機能"," ",(0,r.jsx)("span",{className:"text-green-600",children:"✓"})]}),(0,r.jsxs)("li",{className:"tracking-[-.01em]",children:["レスポンシブデザイン対応"," ",(0,r.jsx)("span",{className:"text-green-600",children:"✓"})]})]}),(0,r.jsxs)("div",{className:"flex gap-4 items-center flex-col sm:flex-row",children:[(0,r.jsxs)("a",{className:"rounded-full border border-solid border-transparent transition-colors flex items-center justify-center bg-foreground text-background gap-2 hover:bg-[#383838] dark:hover:bg-[#ccc] font-medium text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 sm:w-auto",href:"https://vercel.com/new?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app",target:"_blank",rel:"noopener noreferrer",children:[(0,r.jsx)(a.default,{className:"dark:invert",src:"/vercel.svg",alt:"Vercel logomark",width:20,height:20}),"Deploy to Vercel"]}),(0,r.jsx)("a",{className:"rounded-full border border-solid border-black/[.08] dark:border-white/[.145] transition-colors flex items-center justify-center hover:bg-[#f2f2f2] dark:hover:bg-[#1a1a1a] hover:border-transparent font-medium text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 w-full sm:w-auto",href:"https://supabase.com/docs",target:"_blank",rel:"noopener noreferrer",children:"Supabase Docs"})]})]})})}}},e=>{e.O(0,[823,261,773,587,902,358],()=>e(e.s=2307)),_N_E=e.O()}]);