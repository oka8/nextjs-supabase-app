(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{1525:(e,r,t)=>{"use strict";t.d(r,{N:()=>s});let s=(0,t(4823).UU)("http://127.0.0.1:54321","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxvY2FsaG9zdCIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQ1MTg1NTUwLCJleHAiOjE5NjA3NjE1NTB9.A9x7b1FhjCTFWVGa8QJ5OJMGq9D3LY1Ib3YGI5X2-OY")},2942:(e,r,t)=>{"use strict";var s=t(2418);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},3039:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=3039,e.exports=r},4170:(e,r,t)=>{Promise.resolve().then(t.bind(t,8472))},8472:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(4568),a=t(7620),l=t(2942),d=t(1525);function n(e){let{mode:r="signin",onSuccess:t,onError:l}=e,[n,o]=(0,a.useState)(!1),i=async()=>{o(!0);try{let{data:e,error:r}=await d.N.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat("http://localhost:3001","/auth/callback")}});r?(console.error("Google sign in error:",r),null==l||l(r.message)):null==t||t()}catch(e){console.error("Google sign in error:",e),null==l||l("Googleログインでエラーが発生しました")}finally{o(!1)}};return(0,s.jsxs)("button",{type:"button",onClick:i,disabled:n,className:"w-full flex justify-center items-center gap-3 py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[!n&&(0,s.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n&&(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-current"}),(0,s.jsx)("span",{className:"font-medium",children:n?"signup"===r?"アカウント作成中...":"ログイン中...":"signup"===r?"Googleでアカウント作成":"Googleでログイン"})]})}function o(e){let{onToggleMode:r}=e,[t,o]=(0,a.useState)(""),[i,c]=(0,a.useState)(""),[u,x]=(0,a.useState)(!1),[m,g]=(0,a.useState)(null),h=(0,l.useRouter)(),b=async e=>{e.preventDefault(),x(!0),g(null);try{let{data:e,error:r}=await d.N.auth.signInWithPassword({email:t,password:i});r?g(r.message):h.push("/")}catch(e){g("ログイン中にエラーが発生しました")}finally{x(!1)}};return(0,s.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:"ログイン"}),(0,s.jsx)("p",{className:"text-center text-gray-600 dark:text-gray-400",children:"アカウントにログインしてください"})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(n,{mode:"signin",onError:e=>g(e)})}),(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500",children:"または"})})]}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"メールアドレス"}),(0,s.jsx)("input",{id:"email",type:"email",value:t,onChange:e=>o(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"your-email@example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"パスワード"}),(0,s.jsx)("input",{id:"password",type:"password",value:i,onChange:e=>c(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"パスワードを入力"})]}),m&&(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:m})}),(0,s.jsx)("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"ログイン中...":"ログイン"})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["アカウントをお持ちでない方は"," ",(0,s.jsx)("button",{onClick:r,className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"新規登録"})]})})]})})}function i(e){let{onToggleMode:r}=e,[t,l]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[x,m]=(0,a.useState)(!1),[g,h]=(0,a.useState)(null),[b,f]=(0,a.useState)(!1),p=async e=>{if(e.preventDefault(),m(!0),h(null),o!==c){h("パスワードが一致しません"),m(!1);return}if(o.length<6){h("パスワードは6文字以上で入力してください"),m(!1);return}try{let{data:e,error:r}=await d.N.auth.signUp({email:t,password:o});r?h(r.message):f(!0)}catch(e){h("アカウント作成中にエラーが発生しました")}finally{m(!1)}};return b?(0,s.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/20",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("h2",{className:"mt-4 text-2xl font-bold text-gray-900 dark:text-white",children:"確認メールを送信しました"}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[t," に確認メールをお送りしました。",(0,s.jsx)("br",{}),"メール内のリンクをクリックしてアカウントを有効化してください。"]}),(0,s.jsx)("button",{onClick:r,className:"mt-6 w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"ログイン画面に戻る"})]})})}):(0,s.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:"アカウント作成"}),(0,s.jsx)("p",{className:"text-center text-gray-600 dark:text-gray-400",children:"新しいアカウントを作成してください"})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(n,{mode:"signup",onError:e=>h(e)})}),(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500",children:"または"})})]}),(0,s.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"signup-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"メールアドレス"}),(0,s.jsx)("input",{id:"signup-email",type:"email",value:t,onChange:e=>l(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"your-email@example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"signup-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"パスワード"}),(0,s.jsx)("input",{id:"signup-password",type:"password",value:o,onChange:e=>i(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"6文字以上のパスワード"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"パスワード（確認）"}),(0,s.jsx)("input",{id:"confirm-password",type:"password",value:c,onChange:e=>u(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"パスワードを再入力"})]}),g&&(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:g})}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"アカウント作成中...":"アカウント作成"})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["すでにアカウントをお持ちの方は"," ",(0,s.jsx)("button",{onClick:r,className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"ログイン"})]})})]})})}function c(){let[e,r]=(0,a.useState)(!0),[t,n]=(0,a.useState)(!0),c=(0,l.useRouter)();return((0,a.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await d.N.auth.getSession();if(null==e?void 0:e.user)return void c.push("/")}catch(e){console.log("Auth check error:",e)}finally{n(!1)}})();let{data:{subscription:e}}=d.N.auth.onAuthStateChange((e,r)=>{"SIGNED_IN"===e&&(null==r?void 0:r.user)&&c.push("/")});return()=>e.unsubscribe()},[c]),t)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-8",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Next.js"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-gray-500",children:"+"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"Supabase"})]})}),e?(0,s.jsx)(o,{onToggleMode:()=>r(!1)}):(0,s.jsx)(i,{onToggleMode:()=>r(!0)}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Powered by Supabase Auth"})})]})})}}},e=>{e.O(0,[823,587,902,358],()=>e(e.s=4170)),_N_E=e.O()}]);